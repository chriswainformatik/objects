class CodeRunner{stepDelay=.5;classesList=[];methodsCaseSensitive=!1;instancesList=[];lines=[];shapesList=[];constructor(e){this.classesList=e}setLines(e){this.lines=e}setStepDelay(e){this.stepDelay=e}clearObjects(){this.instancesList=[],globalInstancesList=this.instancesList,this.shapesList=[]}runCode(t,s,e,r){for(var a=0;a<this.lines.length;a++){var n=this.lines[a].toString();try{this.checkSyntax(a,n)}catch(e){for(var i="Error in line "+(a+1)+":\n"+e.lineText+"\n",l="",c=0;c<e.charNumber;c++)l+=" ";return i+=l+="^",console.log(i),t(a),-1}try{this.checkSemantics(a,n)}catch(e){return console.log(e),s(a,e),-1}}a=0,this.runLine(a,r),a++;var h=setInterval(()=>{this.runLine(a,r),++a==this.lines.length&&(clearInterval(h),setTimeout(function(){e(-1)},1e3*this.stepDelay))},1e3*this.stepDelay)}runLine(e,t){if(setActiveLine(e),void 0!==this.lines[e]){var s,r,a,n=this.lines[e].toString();if((n=n.replaceAll(" ","")).includes(":")){var i=n.split(":")[0],l=void 0;switch(n.split(":")[1]){case"KREIS":l=new KREIS(i);break;case"RECHTECK":l=new RECHTECK(i);break;case"DREIECK":l=new DREIECK(i);break;default:console.error("An error occured while running the code (after checking syntax and semantics)")}var e=document.createElement("canvas");e.id=l.instanceName,e.classList.add("shape-canvas"),e.classList.add("graphical-object"),e.width=l.w,e.height=l.h,e.style.left=l.x,e.style.top=l.y,"rectangle"!=l.type&&"triangle"!=l.type||(e.style.top=l.y-l.h),document.getElementById("the-canvas").appendChild(e),t(l),this.shapesList.push(l)}else n.includes(".")?(s=this.instancesList.find(e=>e.name==n.split(".")[0]),e=n.split(".")[1].split("(")[0],(r=n.split("(")[1].substring(0,n.split("(")[1].length-1).split(",")).forEach((e,t)=>{r[t]=e.replaceAll(" ",""),r[t]=e.replaceAll('"',"")}),(a=this.shapesList.find(e=>e.instanceName==s.name))[e.toLowerCase()].apply(a,r),t(a)):""!=n&&console.error("An error occured while running the code (after checking syntax and semantics)")}}checkSemantics(e,t){var s=[];if((t=(t=t.toString()).replaceAll(" ","")).includes(":")){var r=(s=t.split(":"))[0],a=s[1];if(null==this.classesList.find(e=>e.name==a))throw new NoSuchClassError(e,a);if(null!=this.instancesList.find(e=>e.name==r))throw new DuplicateInstanceError(e,r);var n={name:r,class:a};this.instancesList.push(n),globalInstancesList.push(n)}else if(t.includes(".")){var r=(s=t.split("."))[0],n=s[1],i=n.split("(")[0],l=n.substring(0,n.length-1).split("(")[1].split(","),t=(l.forEach((e,t)=>{l[t]=e.replaceAll(" ",""),l[t]=e.replaceAll('"',"")}),void 0);if(null==this.instancesList.find(e=>e.name==r))throw new NoSuchInstanceError(e,r);var a=this.instancesList.find(e=>e.name==r).class,t=this.classesList.find(e=>e.name==a),c=void 0;if(this.methodsCaseSensitive){if(null==t.methods.find(e=>e.name==i))throw new NoSuchMethodError(e,i);c=t.methods.find(e=>e.name==i)}else{if(null==t.methods.find(e=>e.name.toLowerCase()==i.toLowerCase()))throw new NoSuchMethodError(e,i);c=t.methods.find(e=>e.name.toLowerCase()==i.toLowerCase())}if(l.length!=c.parameters.length)throw new WrongArgumentCountError(e,i);for(var h=0;h<l.length;h++)if("number"==c.parameters[h]){if(isNaN(Number.parseInt(l[h])))throw new MyIllegalArgumentError(e,i,l[h],c.parameters[h])}else if("string"==c.parameters[h]&&null==globalAllowedValues.find(e=>e==l[h]))throw new MyIllegalArgumentError(e,i,l[h])}return!0}createInstance(e,t){if(null==this.classesList.find(e=>e.name==t))throw new NoSuchClassError(i,line[2].name);switch(t){case"KREIS":return new KREIS(e);case"RECHTECK":return new RECHTECK(e);case"DREIECK":return new DREIECK(e)}}checkSyntax(e,t){if(""!=(t=t.toString())){for(var s=1,r=((t=t.replaceAll(" ",""))[0].match("[a-zA-Z]")||this.invalidInputCharacterError(e,t,0),!1),a=1;a<t.length;a++)switch(s){case 1:t[a].match("[a-zA-Z0-9]")?s=1:"."==t[a]||":"==t[a]?s="."==t[a]?2:8:this.invalidInputCharacterError(e,t,a);break;case 2:t[a].match("[a-zäöüßA-ZÄÖÜ]")?s=3:this.invalidInputCharacterError(e,t,a);break;case 3:t[a].match("[a-zäöüßA-ZÄÖÜ0-9]")?s=3:"("==t[a]?s=4:this.invalidInputCharacterError(e,t,a);break;case 4:'"'==t[a]?(s=41,r=!0):t[a].match("[a-zäöüßA-ZÄÖÜ]")?s=5:t[a].match("[0-9]")?s=6:this.invalidInputCharacterError(e,t,a);break;case 41:t[a].match("[a-zäöüßA-ZÄÖÜ]")?s=5:this.invalidInputCharacterError(e,t,a);break;case 5:t[a].match("[a-zäöüßA-ZÄÖÜ]")?s=5:","!=t[a]||r?")"!=t[a]||r?'"'==t[a]&&r?(r=!1,s=51):this.invalidInputCharacterError(e,t,a):s=7:s=4;break;case 51:","==t[a]?s=4:")"!=t[a]||r?this.invalidInputCharacterError(e,t,a):s=7;case 6:t[a].match("[0-9]")?s=6:","!=t[a]||r?")"!=t[a]||r?this.invalidInputCharacterError(e,t,a):s=7:s=4;break;case 61:","==t[a]?s=4:")"==t[a]?s=7:this.invalidInputCharacterError(e,t,a);break;case 7:this.invalidInputCharacterError(e,t,a);case 8:t[a].match("[A-ZÄÖÜ]")?s=8:this.invalidInputCharacterError(e,t,a)}return 7==s||8==s}}invalidInputCharacterError(e,t,s){throw new InvalidInputCharacterError(e,t,s)}}class Token{constructor(e){this.name=e}getName(){return this.name}equals(e){return this.name==e.name}}class InstanceName extends Token{constructor(e){super(e)}}class ClassName extends Token{constructor(e){super(e)}}class MethodCall extends Token{constructor(e,t){super(e),this.value=t}}class Seperator extends Token{constructor(e){super(e)}}